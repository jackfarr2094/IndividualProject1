<html>
    <head>
        <link rel="stylesheet" type="text/css" href="styling.css">
    </head>

<body>
    <script type="text/javascript" src="JSB2F.js"></script>
<div class="jumbotron text-center">
  <center> <h1>The Rock Playlist Database</h1> </center>
<center> <p>Search for a range of Rock and Metal playlists below</p> </center>
</div>
<div class="container">
  <div class="row">
    <div class="col-sm-4">

<center><table id="table1" class="table table-dark">
  <thead>
    <tr>
      <th scope="col">Url</th>
      <th scope="col">Playlist Name</th>
      <th scope="col">SubGenre</th>
      <th scope="col">Featured Artist</th>
    </tr>
  </thead> </center>
  <br>
  <br>   

<center> <input type="button" value= "Show All" onclick="showAllRecords()"> 
<input type="button" value= "Find Artists" onclick= "findbyfeaturedArtist()"> 
<input type="button" value= "Find by Genre" onclick= "findbysubGenre()">
<input type="button" value= "Find by Playlist" onclick= "findbyplaylistName()"> </center>
<br>
<br>
</div>
    </div>
  </div>
</div>




<script>

// function showAllRecords() {
//     var xhr = new XMLHttpRequest();

// xhr.open('GET', 'https://localhost:9001/showAllLists', true);

// xhr.onreadystatechange = function() {
//     if (xhr.readyState == XMLHttpRequest.DONE) {
        
//     }
// }
// xhr.send(null);
// console.log("Show All")
// }

function showAllRecords() {
      const Http = new XMLHttpRequest();
      const url = 'http://localhost:9001/showAllLists';
      Http.open("GET", url);
      Http.onreadystatechange = function(e) {
          if(Http.readyState==4){
              data = JSON.parse(Http.responseText);
              data.forEach(function(item) {
                              

                // console.log(item.playlistName);
                  
                  var table = document.getElementById("table1");
                  var newrow = document.createElement("tr");
                  var turl = newrow.appendChild(document.createElement('td'))
                  var tplaylistName = newrow.appendChild(document.createElement('td'))
                  var tsubGenre = newrow.appendChild(document.createElement('td'))
                  var tfeaturedArtist = newrow.appendChild(document.createElement('td'))
                  var updateButton = document.createElement("input");
                  updateButton.type = "button";
                  updateButton.value = "Update";
                        var tupdate = newrow.appendChild(updateButton);
                        updateButton.onclick = function(){
                          showUpdateForm(item.id);
                        };


                  var deletebutton = document.createElement("input");
                  deletebutton.type = "button";
                        deletebutton.value = "Delete";
                        var tdelete = newrow.appendChild(deletebutton);
                        deletebutton.onclick = function(){
                            deleteRecord(item.id);

                        };
                  turl.innerHTML = item.url;
                  turl.style.color = "red";
                  tplaylistName.innerHTML = item.playlistName;
                  tplaylistName.style.color = "red";
                  tsubGenre.innerHTML = item.subGenre;
                  tsubGenre.style.color = "red";
                  tfeaturedArtist.innerHTML = item.featuredArtist;
                  tfeaturedArtist.style.color = "red";
                  table.appendChild(newrow);

                  
              });
          }
      }
      Http.send();
  }

function findbyfeaturedArtist() {
    let request = new XMLHttpRequest();
    request.open("GET", "https://localhost:9001/findByFeaturedArtist/{a}");
    request.onload = function () {
        renderData(JSON.parse(request.response));
    }
    request.send
    console.log("Artist")
}
function findbysubGenre() {
    let request = new XMLHttpRequest();
    request.open("GET", "https://localhost:9001/findBySubGenre/{sg}");
    request.onload = function () {
        renderData(JSON.parse(request.response));
    }
    request.send
    console.log("SubGenre")
}
function findbyplaylistName() {
    let request = new XMLHttpRequest();
    request.open("GET", "https://localhost:9001/findByPlayListName/{pn}");
    request.onload = function () {
        renderData(JSON.parse(request.response));
    }
    request.send
    console.log("Playlist Name")
}
function findbyUrl() {
    let request = new XMLHttpRequest();
    request.open("GET", "https://localhost:9001/findByUrl/{u}");
    request.onload = function () {
        renderData(JSON.parse(request.response));
    }
    request.send
}
function findbysubGenreandfeaturedArtist() {
    let request = new XMLHttpRequest();
    request.open("GET", "https://localhost:9001/findBySubGenreandFeaturedArtist/{s}/{ar}");
    request.onload = function () {
        renderData(JSON.parse(request.response));
    }
    request.send
}

function deleteRecord() {
      const Http = new XMLHttpRequest();
      const url = 'http://localhost:9001/Deleteby/{id}';
      Http.open("DELETE", url);
      Http.onreadystatechange = function(e) {
          if(Http.readyState==4) {
            data = JSON.parse(Http.responseText);
              data.forEach(function(item) {
              }
          ,)}
      }
}

function updateRecord(id) {
let request = new XMLHttpRequest();
request.open("PUT", "http://localhost:9001/updateby/{id}");
request.setRequestHeader("Content-Type", "application/json");
const questiondata = {
  "id": id,
  "url": document.getElementById("url-update").value,
  "playlistName": document.getElementById("playlistName-update").value,
  "subGenre":  document.getElementById("subGenre-update").value,
  "featuredArtist": document.getElementById("featuredArtist-update").value,
}
}
function addRecord() {
      const Http = new XMLHttpRequest();
      const url = 'http://localhost:9001/RockPlaylists';
      Http.open("POST", url);
      Http.onreadystatechange = function(e) {
          if(Http.readyState==4) {
            data = JSON.parse(Http.responseText);
              data.forEach(function(item) {
              }
          ,)}
      }
}
   
               


</script>
  <form id= "form1" class="form">
        <h2>Url:</h2>
        <input type="text" name="url"><br>
        <h2>Playlist Name:</h2>
        <input type="text" name="playlistName"><br>
        <h2>SubGenre:</h2>
        <input type="text" name="SubGenre"><br>
        <h2>Featured Artist:</h2>
        <input type="text" name="featuredArtist"><br><br>
        <input type="submit" value="Submit" onsubmit= "function addRecord()">
      </form>
      <br>
      <br>
</body>
</html>